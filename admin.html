<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Panel</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: Arial; padding: 18px; }
    h2 { margin-top: 22px; }
    input, select { padding: 6px; margin: 6px 0; }
    button { padding: 8px 12px; margin-right: 6px; }
    .delete-btn { background: #dc3545; color: #fff; border: none; padding: 6px 8px; border-radius: 4px; cursor:pointer; }
    ul { list-style:none; padding-left:0; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th,td { border:1px solid #ccc; padding:8px; text-align:left; }
  </style>
</head>
<body>

<h1>Admin Panel</h1>

<!-- Create User -->
<h2>Create User</h2>
<div id="userForm">
  <label>Username: <input id="newUsername" /></label><br/>
  <label>Password: <input id="newPassword" type="password" /></label><br/>
  <label>Role:
    <select id="newRole">
      <option value="display">Display</option>
      <option value="brand">Brand</option>
    </select>
  </label><br/>
  <label id="brandDisplayWrap" style="display:none">Assign Brand to Display:
    <select id="brandAssignSelect"></select>
  </label><br/>
  <button id="createUserBtn">Create</button>
  <span id="createUserMsg"></span>
</div>

<!-- Upload -->
<h2>Upload Video (assign to a display user)</h2>
<form id="uploadForm">
  <label>Assign to: <select id="assignDisplaySelect"></select></label><br/>
  <input type="file" name="video" accept="video/*" required />
  <button>Upload</button>
</form>

<!-- Video list -->
<h2>Videos (by display)</h2>
<div id="videosGrouped">Loading videos...</div>

<!-- Users -->
<h2>Users</h2>
<ul id="usersList">Loading...</ul>

<!-- History -->
<h2>Login history (brand/admin)</h2>
<label>Pick date: <input type="date" id="filterDate" /></label>
<button id="filterBtn">Filter</button>
<button id="clearFilterBtn">Clear</button>
<button id="exportAllBtn">Export All</button>
<button id="exportFilteredBtn">Export Selected Date</button>

<table>
  <thead><tr><th>User</th><th>Login</th><th>Logout</th><th>Device</th><th>UA</th></tr></thead>
  <tbody id="historyBody"></tbody>
</table>

<script src="supabase-client.js"></script>
<script src="script.js"></script>
</body>
</html>
